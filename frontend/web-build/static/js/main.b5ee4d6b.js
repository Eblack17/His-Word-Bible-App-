(()=>{"use strict";var e={5659:e=>{e.exports="data:image/png;base64,Cg=="},5987:e=>{e.exports="data:image/png;base64,Cg=="},8219:(e,t,r)=>{e.exports=r.p+"static/media/facebook.dc13a9b75ca07ff3db10.png"},6186:(e,t,r)=>{e.exports=r.p+"static/media/google.4df7269fed4a422eb213.png"},8674:(e,t,r)=>{e.exports=r.p+"static/media/logo-full.540f60fc38bf9f829ce3.png"},6975:(e,t,r)=>{r.r(t),r.d(t,{default:()=>ie});var n=r(4467),o=r(6665),a=r(6520),i=r(3077),l=r(1832),s=r(4780),c=r(590),d=(0,r(8336).createClient)("https://fqtkcyuroulpsksnysll.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImZxdGtjeXVyb3VscHNrc255c2xsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3MzQzMzExODYsImV4cCI6MjA0OTkwNzE4Nn0.Xyvdzkida_LG_QNH9rcyUO8Rn7O6koTzAE6V86kkiIs",{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),u=r(467),f=r(296),g=r(3929),h=r(6283),p=r(5648),y=r(3668),x=r(4701),m=r(2626),b=r(5023),j=r(7514),v=r(397);function F(){var e=(0,o.useState)(""),t=(0,f.default)(e,2),r=t[0],n=t[1],a=(0,o.useState)(""),i=(0,f.default)(a,2),l=i[0],s=i[1],c=(0,o.useState)(""),y=(0,f.default)(c,2),F=y[0],w=y[1],S=(0,o.useState)(!1),T=(0,f.default)(S,2),k=T[0],B=T[1],D=(0,m.useNavigation)(),O=function(){var e=(0,u.default)((function*(){try{console.log("Attempting login...");var e=yield d.auth.signInWithPassword({email:r,password:l}),t=e.data,n=e.error;if(n)throw n;null!=t&&t.user&&(console.log("Login successful:",t.user.email),D.navigate("Home"))}catch(o){console.error("Login error:",o.message),w(o.message||"An unexpected error occurred")}}));return function(){return e.apply(this,arguments)}}(),I=function(){var e=(0,u.default)((function*(){try{var e=yield d.auth.signInWithOAuth({provider:"google",options:{redirectTo:window.location.origin}}),t=e.data,r=e.error;if(r)throw r;t&&console.log("Google login initiated")}catch(n){console.error("Google login error:",n),w(n.message||"Failed to login with Google")}}));return function(){return e.apply(this,arguments)}}();return(0,v.jsx)(x.default,{style:C.container,children:(0,v.jsxs)(g.default,{style:C.content,children:[(0,v.jsxs)(g.default,{style:C.header,children:[(0,v.jsx)(h.default,{style:C.title,children:"Welcome Back"}),(0,v.jsx)(h.default,{style:C.subtitle,children:"Sign in to continue"})]}),(0,v.jsxs)(g.default,{style:C.form,children:[(0,v.jsx)(b.default,{label:"Email",value:r,onChangeText:n,mode:"outlined",style:C.input,autoCapitalize:"none",keyboardType:"email-address"}),(0,v.jsx)(g.default,{style:C.passwordContainer,children:(0,v.jsx)(b.default,{label:"Password",value:l,onChangeText:s,secureTextEntry:!k,mode:"outlined",style:C.input,right:(0,v.jsx)(b.default.Icon,{icon:k?"eye-off":"eye",onPress:function(){return B(!k)},color:"#FFD9D0"})})}),F?(0,v.jsx)(h.default,{style:C.errorText,children:F}):null,(0,v.jsx)(j.default,{mode:"contained",onPress:O,style:C.loginButton,children:(0,v.jsx)(h.default,{style:C.loginButtonText,children:"Login"})}),(0,v.jsx)(j.default,{mode:"outlined",onPress:I,style:C.googleButton,children:(0,v.jsx)(h.default,{style:C.googleButtonText,children:"Continue with Google"})}),(0,v.jsxs)(g.default,{style:C.links,children:[(0,v.jsx)(p.default,{onPress:function(){return D.navigate("ForgotPassword")},children:(0,v.jsx)(h.default,{style:C.linkText,children:"Forgot Password?"})}),(0,v.jsx)(p.default,{onPress:function(){return D.navigate("SignUp")},children:(0,v.jsx)(h.default,{style:C.linkText,children:"Create Account"})})]})]})]})})}var C=y.default.create({container:{flex:1,backgroundColor:"#000000"},content:{flex:1,padding:20,justifyContent:"center"},header:{alignItems:"center",marginBottom:40},title:{fontSize:32,color:"#FFFFFF",fontWeight:"bold",marginBottom:8},subtitle:{fontSize:16,color:"#666666"},form:{gap:16},input:{backgroundColor:"#1A1A1A"},passwordContainer:{position:"relative"},errorText:{color:"#FF6B6B",textAlign:"center"},loginButton:{backgroundColor:"#FFD9D0",padding:8},loginButtonText:{color:"#000000",fontSize:16,fontWeight:"bold"},googleButton:{borderColor:"#FFD9D0"},googleButtonText:{color:"#FFFFFF",fontSize:16},links:{flexDirection:"row",justifyContent:"space-between",marginTop:16},linkText:{color:"#FFD9D0",fontSize:14}}),w=r(484),S=r(1385);function T(){var e=(0,o.useState)(""),t=(0,f.default)(e,2),n=t[0],a=t[1],i=(0,o.useState)(""),l=(0,f.default)(i,2),s=l[0],d=l[1],y=(0,o.useState)(""),j=(0,f.default)(y,2),F=j[0],C=j[1],T=(0,m.useNavigation)(),B=(0,c.useSupabaseClient)(),D=function(){var e=(0,u.default)((function*(){try{var e=(yield B.auth.resetPasswordForEmail(n,{redirectTo:window.location.origin+"/reset-password"})).error;if(e)throw e;d("Password reset instructions have been sent to your email"),C("")}catch(t){C(t.message||"Failed to send reset instructions"),d("")}}));return function(){return e.apply(this,arguments)}}();return(0,v.jsx)(x.default,{style:k.container,children:(0,v.jsxs)(g.default,{style:k.content,children:[(0,v.jsx)(g.default,{style:k.header,children:(0,v.jsx)(w.default,{source:r(8674),style:k.logo,resizeMode:"contain"})}),(0,v.jsxs)(g.default,{style:k.formContainer,children:[(0,v.jsxs)(h.default,{style:k.title,children:["Reset your","\n","password"]}),F?(0,v.jsxs)(g.default,{style:k.errorContainer,children:[(0,v.jsx)(S.default,{name:"alert-circle",size:20,color:"#FF6B6B"}),(0,v.jsx)(h.default,{style:k.error,children:F})]}):null,s?(0,v.jsxs)(g.default,{style:k.messageContainer,children:[(0,v.jsx)(S.default,{name:"checkmark-circle",size:20,color:"#4CAF50"}),(0,v.jsx)(h.default,{style:k.message,children:s})]}):null,(0,v.jsx)(h.default,{style:k.description,children:"Enter your email address and we'll send you instructions to reset your password."}),(0,v.jsx)(g.default,{style:k.inputContainer,children:(0,v.jsxs)(g.default,{style:k.inputWrapper,children:[(0,v.jsx)(S.default,{name:"mail-outline",size:24,color:"#666666",style:k.inputIcon}),(0,v.jsx)(b.default,{mode:"flat",placeholder:"Email",placeholderTextColor:"#666666",value:n,onChangeText:a,style:k.input,theme:{colors:{text:"#FFFFFF",primary:"#FFD9D0",placeholder:"#666666"}},underlineColor:"transparent"})]})}),(0,v.jsx)(p.default,{style:k.resetButton,onPress:D,children:(0,v.jsx)(h.default,{style:k.resetButtonText,children:"Send Reset Instructions"})}),(0,v.jsxs)(p.default,{style:k.backButton,onPress:function(){return T.navigate("Login")},children:[(0,v.jsx)(S.default,{name:"arrow-back",size:24,color:"#FFD9D0"}),(0,v.jsx)(h.default,{style:k.backButtonText,children:"Back to Login"})]})]})]})})}var k=y.default.create({container:{flex:1,backgroundColor:"#000000"},content:{flex:1,padding:20},header:{alignItems:"center",marginBottom:40},logo:{width:400,height:200},title:{fontSize:32,color:"#FFFFFF",marginBottom:16,fontWeight:"600"},description:{color:"#666666",fontSize:16,marginBottom:32,textAlign:"center",lineHeight:24},errorContainer:{flexDirection:"row",alignItems:"center",backgroundColor:"rgba(255, 107, 107, 0.1)",padding:12,borderRadius:8,marginBottom:16},error:{color:"#FF6B6B",marginLeft:8,flex:1},messageContainer:{flexDirection:"row",alignItems:"center",backgroundColor:"rgba(76, 175, 80, 0.1)",padding:12,borderRadius:8,marginBottom:16},message:{color:"#4CAF50",marginLeft:8,flex:1},inputContainer:{marginBottom:24},inputWrapper:{flexDirection:"row",alignItems:"center",backgroundColor:"#1A1A1A",borderRadius:8,paddingHorizontal:16},inputIcon:{marginRight:12},input:{flex:1,backgroundColor:"transparent",color:"#FFFFFF",height:56},resetButton:{backgroundColor:"#FFD9D0",height:56,borderRadius:8,alignItems:"center",justifyContent:"center",marginBottom:16},resetButtonText:{color:"#000000",fontSize:16,fontWeight:"bold"},backButton:{flexDirection:"row",alignItems:"center",justifyContent:"center",height:56},backButtonText:{color:"#FFD9D0",fontSize:16,marginLeft:8}});function B(){var e=(0,o.useState)(""),t=(0,f.default)(e,2),n=t[0],a=t[1],i=(0,o.useState)(""),l=(0,f.default)(i,2),s=l[0],d=l[1],y=(0,o.useState)(""),j=(0,f.default)(y,2),F=j[0],C=j[1],T=(0,o.useState)(!1),k=(0,f.default)(T,2),B=k[0],O=k[1],I=(0,o.useState)(!1),P=(0,f.default)(I,2),z=P[0],A=P[1],R=(0,o.useState)(""),E=(0,f.default)(R,2),L=E[0],N=E[1],W=(0,m.useNavigation)(),_=(0,c.useSupabaseClient)(),H=function(){var e=(0,u.default)((function*(){if(s===F)try{var e=yield _.auth.signUp({email:n,password:s,options:{data:{email_confirmed:!0}}}),t=(e.data,e.error);if(t)throw t;var r=(yield _.auth.signInWithPassword({email:n,password:s})).error;if(r)throw r;W.navigate("Login")}catch(o){N(o.message||"Failed to sign up")}else N("Passwords do not match")}));return function(){return e.apply(this,arguments)}}();return(0,v.jsx)(x.default,{style:D.container,children:(0,v.jsxs)(g.default,{style:D.content,children:[(0,v.jsx)(g.default,{style:D.header,children:(0,v.jsx)(w.default,{source:r(8674),style:D.logo,resizeMode:"contain"})}),(0,v.jsxs)(h.default,{style:D.title,children:["Create your","\n","account"]}),L?(0,v.jsxs)(g.default,{style:D.errorContainer,children:[(0,v.jsx)(S.default,{name:"alert-circle",size:20,color:"#FF6B6B"}),(0,v.jsx)(h.default,{style:D.error,children:L})]}):null,(0,v.jsxs)(g.default,{style:D.inputContainer,children:[(0,v.jsxs)(g.default,{style:D.inputWrapper,children:[(0,v.jsx)(S.default,{name:"mail-outline",size:24,color:"#666666",style:D.inputIcon}),(0,v.jsx)(b.default,{mode:"flat",placeholder:"Email",placeholderTextColor:"#666666",value:n,onChangeText:a,style:D.input,theme:{colors:{text:"#FFFFFF",primary:"#FFD9D0",placeholder:"#666666"}},underlineColor:"transparent"})]}),(0,v.jsxs)(g.default,{style:D.inputWrapper,children:[(0,v.jsx)(S.default,{name:"lock-closed-outline",size:24,color:"#666666",style:D.inputIcon}),(0,v.jsx)(b.default,{mode:"flat",placeholder:"Password",placeholderTextColor:"#666666",value:s,onChangeText:d,secureTextEntry:!B,style:D.input,theme:{colors:{text:"#FFFFFF",primary:"#FFD9D0",placeholder:"#666666"}},underlineColor:"transparent",right:(0,v.jsx)(b.default.Icon,{icon:B?"eye-off":"eye",color:"#666666",onPress:function(){return O(!B)}})})]}),(0,v.jsxs)(g.default,{style:D.inputWrapper,children:[(0,v.jsx)(S.default,{name:"lock-closed-outline",size:24,color:"#666666",style:D.inputIcon}),(0,v.jsx)(b.default,{mode:"flat",placeholder:"Confirm Password",placeholderTextColor:"#666666",value:F,onChangeText:C,secureTextEntry:!z,style:D.input,theme:{colors:{text:"#FFFFFF",primary:"#FFD9D0",placeholder:"#666666"}},underlineColor:"transparent",right:(0,v.jsx)(b.default.Icon,{icon:z?"eye-off":"eye",color:"#666666",onPress:function(){return A(!z)}})})]})]}),(0,v.jsx)(p.default,{style:D.signUpButton,onPress:H,children:(0,v.jsx)(h.default,{style:D.signUpButtonText,children:"Sign Up"})}),(0,v.jsxs)(g.default,{style:D.dividerContainer,children:[(0,v.jsx)(g.default,{style:D.divider}),(0,v.jsx)(h.default,{style:D.dividerText,children:"Or sign up with"}),(0,v.jsx)(g.default,{style:D.divider})]}),(0,v.jsxs)(g.default,{style:D.socialButtonsContainer,children:[(0,v.jsxs)(p.default,{style:D.socialButton,children:[(0,v.jsx)(w.default,{source:r(6186),style:D.socialIcon}),(0,v.jsx)(h.default,{style:D.socialButtonText,children:"Google"})]}),(0,v.jsxs)(p.default,{style:D.socialButton,children:[(0,v.jsx)(w.default,{source:r(8219),style:D.socialIcon}),(0,v.jsx)(h.default,{style:D.socialButtonText,children:"Facebook"})]})]}),(0,v.jsxs)(p.default,{style:D.backButton,onPress:function(){return W.navigate("Login")},children:[(0,v.jsx)(S.default,{name:"arrow-back",size:24,color:"#FFD9D0"}),(0,v.jsx)(h.default,{style:D.backButtonText,children:"Back to Login"})]})]})})}var D=y.default.create({container:{flex:1,backgroundColor:"#000000"},content:{flex:1,padding:20},header:{alignItems:"center",marginTop:40,marginBottom:40},logo:{width:400,height:200},title:{fontSize:32,color:"#FFFFFF",marginBottom:16,fontWeight:"600"},errorContainer:{flexDirection:"row",alignItems:"center",backgroundColor:"rgba(255, 107, 107, 0.1)",padding:12,borderRadius:8,marginBottom:16},error:{color:"#FF6B6B",marginLeft:8,fontSize:14},inputContainer:{gap:16,marginBottom:24},inputWrapper:{flexDirection:"row",alignItems:"center",backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:8,paddingHorizontal:16},inputIcon:{marginRight:12},input:{flex:1,backgroundColor:"transparent",height:56,fontSize:16},signUpButton:{backgroundColor:"#FFD9D0",height:56,borderRadius:8,alignItems:"center",justifyContent:"center",marginBottom:24},signUpButtonText:{color:"#000000",fontSize:16,fontWeight:"600"},dividerContainer:{flexDirection:"row",alignItems:"center",marginBottom:24},divider:{flex:1,height:1,backgroundColor:"#333333"},dividerText:{color:"#666666",marginHorizontal:16,fontSize:14},socialButtonsContainer:{flexDirection:"row",justifyContent:"space-between",gap:16,marginBottom:24},socialButton:{flex:1,flexDirection:"row",alignItems:"center",justifyContent:"center",height:56,backgroundColor:"rgba(255, 255, 255, 0.1)",borderRadius:8,gap:8},socialIcon:{width:24,height:24},socialButtonText:{color:"#FFFFFF",fontSize:16},backButton:{flexDirection:"row",alignItems:"center",justifyContent:"center",gap:8},backButtonText:{color:"#FFD9D0",fontSize:16}}),O=r(4307),I=r(5179),P=r(8885),z=r(4132),A=r(1457),R=r(2469),E=r(1171),L=r(7869),N=r(7908),W=r(6888),_=r(3715),H=(0,N.initializeApp)({apiKey:"AIzaSyB3K8B2keUu2sqpqb2Fp-NOw05vgC8aLRo",authDomain:"hisword-916b0.firebaseapp.com",projectId:"hisword-916b0",storageBucket:"hisword-916b0.firebasestorage.app",messagingSenderId:"698551280268",appId:"1:698551280268:web:a9cb26f7b1ecbe97cfd1a9",measurementId:"G-Z75XW2EXM9"}),V=(0,W.getAuth)(H),q=(0,_.getFirestore)(H);function U(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function M(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?U(Object(r),!0).forEach((function(t){(0,n.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):U(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var G={loadChats:function(){var e=(0,u.default)((function*(){var e=V.currentUser;if(!e)throw new Error("No user found");var t=(0,_.collection)(q,"chats"),r=(0,_.query)(t,(0,_.where)("user_id","==",e.uid),(0,_.orderBy)("created_at","desc")),n=(yield(0,_.getDocs)(r)).docs.map((function(e){return M(M({id:e.id},e.data()),{},{response:"string"===typeof e.data().response?JSON.parse(e.data().response):e.data().response})}));return{chats:n.filter((function(e){return!e.is_archived})),archivedChats:n.filter((function(e){return e.is_archived}))}}));return function(){return e.apply(this,arguments)}}(),archiveChat:function(){var e=(0,u.default)((function*(e,t){var r=(0,_.doc)(q,"chats",e);yield(0,_.updateDoc)(r,{is_archived:!t})}));return function(t,r){return e.apply(this,arguments)}}(),deleteChat:function(){var e=(0,u.default)((function*(e){var t=(0,_.doc)(q,"chats",e);yield(0,_.deleteDoc)(t)}));return function(t){return e.apply(this,arguments)}}(),createChat:function(){var e=(0,u.default)((function*(e,t){var r=V.currentUser;if(!r)throw new Error("No user found");var n=(0,_.collection)(q,"chats"),o={user_id:r.uid,question:e,response:JSON.stringify(t),created_at:(new Date).toISOString(),is_archived:!1};return M(M({id:(yield(0,_.addDoc)(n,o)).id},o),{},{response:t})}));return function(t,r){return e.apply(this,arguments)}}(),signOut:function(){var e=(0,u.default)((function*(){yield(0,W.signOut)(V)}));return function(){return e.apply(this,arguments)}}()};r(5987),r(5659);function J(){var e=(0,m.useNavigation)(),t=(0,o.useState)(!0),n=(0,f.default)(t,2),a=n[0],i=n[1],l=(0,o.useState)(""),s=(0,f.default)(l,2),c=s[0],d=s[1],h=(0,o.useState)([]),y=(0,f.default)(h,2),x=y[0],F=y[1],C=(0,o.useState)([]),S=(0,f.default)(C,2),T=S[0],k=S[1],B=(0,o.useState)(!0),D=(0,f.default)(B,2),N=D[0],W=D[1],_=(0,o.useState)(null),H=(0,f.default)(_,2),V=H[0],q=H[1],U=(0,o.useState)(null),M=(0,f.default)(U,2),J=M[0],X=M[1],Y=(0,o.useState)(!1),Z=(0,f.default)(Y,2),K=Z[0],$=Z[1],ee=(0,o.useState)(""),te=(0,f.default)(ee,2),re=te[0],ne=te[1],oe=(0,o.useState)("success"),ae=(0,f.default)(oe,2),ie=ae[0],le=ae[1],se=(0,o.useRef)(new I.default.Value(40)).current,ce=(0,o.useRef)(new I.default.Value(0)).current,de=function(e){X(e),I.default.timing(ce,{toValue:e?96:0,duration:200,useNativeDriver:!1}).start()};(0,m.useFocusEffect)(o.useCallback((function(){fe()}),[]));var ue=function(){var t=(0,u.default)((function*(){try{yield G.signOut(),e.navigate("Login")}catch(t){console.error("Error logging out:",t)}}));return function(){return t.apply(this,arguments)}}(),fe=function(){var t=(0,u.default)((function*(){try{W(!0);var t=yield G.loadChats(),r=t.chats,n=t.archivedChats;F(r),k(n)}catch(o){console.error("Error in loadChats:",o),o.message.includes("No user found")&&e.navigate("Login")}finally{W(!1)}}));return function(){return t.apply(this,arguments)}}(),ge=function(){var e=(0,u.default)((function*(e,t){try{yield G.archiveChat(e,t),le("success"),ne(`Chat ${t?"unarchived":"archived"} successfully`),$(!0),fe()}catch(r){console.error("Error in handleArchiveToggle:",r),le("error"),ne(r.message),$(!0)}}));return function(t,r){return e.apply(this,arguments)}}(),he=function(){var e=(0,u.default)((function*(e){try{q(e),yield G.deleteChat(e),le("success"),ne("Chat deleted successfully"),$(!0),fe()}catch(t){console.error("Error in handleDelete:",t),le("error"),ne(t.message),$(!0)}finally{q(null)}}));return function(t){return e.apply(this,arguments)}}(),pe=(a?x:T).filter((function(e){return e.question.toLowerCase().includes(c.toLowerCase())})).slice(0,a?10:20);return(0,v.jsxs)(E.SafeAreaView,{style:Q.container,children:[(0,v.jsx)(O.default,{contentContainerStyle:Q.scrollContent,children:(0,v.jsxs)(g.default,{style:Q.content,children:[(0,v.jsx)(w.default,{source:r(8674),style:Q.logo,resizeMode:"contain"}),(0,v.jsx)(g.default,{style:Q.titleContainer,children:(0,v.jsxs)(P.default,{style:Q.mainTitle,children:["Seek Your Verse, Find Your"," ",(0,v.jsx)(P.default,{style:[Q.mainTitle,Q.highlight],children:"Path"})]})}),(0,v.jsx)(p.default,{style:Q.newTopicButton,onPress:function(){return e.navigate("Question")},children:(0,v.jsx)(P.default,{style:Q.newTopicText,children:"+ New Topic"})}),(0,v.jsxs)(g.default,{style:Q.historySection,children:[(0,v.jsxs)(g.default,{style:Q.historyHeader,children:[(0,v.jsxs)(g.default,{style:Q.toggleContainer,children:[(0,v.jsx)(p.default,{style:[Q.toggleButton,a&&Q.activeToggle],onPress:function(){return i(!0)},children:(0,v.jsx)(P.default,{style:[Q.toggleText,a&&Q.activeToggleText],children:"Chats"})}),(0,v.jsx)(p.default,{style:[Q.toggleButton,!a&&Q.activeToggle],onPress:function(){return i(!1)},children:(0,v.jsx)(P.default,{style:[Q.toggleText,!a&&Q.activeToggleText],children:"Archived"})})]}),(0,v.jsxs)(I.default.View,{style:[Q.searchContainer,{width:se,flexDirection:"row",alignItems:"center"}],children:[(0,v.jsx)(p.default,{onPress:function(){I.default.timing(se,{toValue:40===se._value?200:40,duration:300,useNativeDriver:!1}).start()},children:(0,v.jsx)(L.default,{name:"magnify",size:24,color:"#fff"})}),(0,v.jsx)(I.default.View,{style:{flex:1,overflow:"hidden",width:se},children:(0,v.jsx)(b.default,{style:Q.searchInput,placeholder:"Search history...",value:c,onChangeText:d,placeholderTextColor:"#666"})})]})]}),N?(0,v.jsx)(P.default,{style:Q.loadingText,children:"Loading your conversations..."}):0===pe.length?(0,v.jsx)(P.default,{style:Q.emptyText,children:a?"No chat history yet. Start a new topic!":"No archived chats yet."}):(0,v.jsxs)(g.default,{style:Q.historyCards,children:[pe.map((function(t){var r=J===t.id;return(0,v.jsx)(p.default,{style:Q.cardContainer,onPress:function(){r?de(null):e.navigate("Response",{question:t.question,verse:t.response.verse,reference:t.response.reference,relevance:t.response.relevance,explanation:t.response.explanation})},onLongPress:function(){return de(t.id)},delayLongPress:200,children:(0,v.jsxs)(g.default,{style:Q.cardWrapper,children:[(0,v.jsxs)(z.default,{style:[Q.historyCard,r&&Q.activeCard],children:[(0,v.jsx)(g.default,{style:Q.historyCardHeader,children:(0,v.jsxs)(g.default,{style:Q.questionContainer,children:[(0,v.jsx)(P.default,{style:Q.historyCardTitle,numberOfLines:2,children:t.question}),(0,v.jsx)(P.default,{style:Q.historyCardTime,children:new Date(t.created_at).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})})]})}),(0,v.jsxs)(g.default,{style:Q.verseContainer,children:[(0,v.jsx)(P.default,{style:Q.verseText,numberOfLines:2,children:t.response.verse}),(0,v.jsx)(P.default,{style:Q.referenceText,children:t.response.reference})]})]}),(0,v.jsxs)(I.default.View,{style:[Q.actionButtons,{width:ce}],children:[(0,v.jsx)(A.default,{icon:t.is_archived?"archive-remove":"archive",size:24,onPress:function(){ge(t.id,t.is_archived),de(null)},style:Q.actionButton}),(0,v.jsx)(A.default,{icon:"delete",size:24,loading:V===t.id,disabled:V===t.id,onPress:function(){he(t.id),de(null)},iconColor:"#FF6B6B",style:Q.actionButton})]})]})},t.id)})),function(){var e=a?x.length:T.length,t=pe.length,r=e>t;return N?(0,v.jsx)(P.default,{style:Q.emptyText,children:"Loading your conversations..."}):c&&0===pe.length?(0,v.jsxs)(P.default,{style:Q.emptyText,children:['No matches found for "',c,'"']}):0===pe.length?(0,v.jsx)(P.default,{style:Q.emptyText,children:a?"No conversations yet":"No archived conversations"}):r?(0,v.jsxs)(P.default,{style:Q.limitText,children:["Showing ",t," of ",e," ",a?"conversations":"archived items"]}):null}()]})]}),(0,v.jsx)(j.default,{mode:"outlined",onPress:ue,style:Q.logoutButton,children:"Logout"})]})}),(0,v.jsx)(R.default,{visible:K,onDismiss:function(){return $(!1)},duration:2e3,style:[Q.snackbar,"success"===ie?Q.successSnackbar:Q.errorSnackbar],children:re})]})}var Q=y.default.create({container:{flex:1,backgroundColor:"#000000"},content:{flex:1,padding:20},scrollContent:{flexGrow:1},logo:{width:"100%",height:159,marginTop:20,marginBottom:30},titleContainer:{marginBottom:32},mainTitle:{fontFamily:"SF Pro Display",fontSize:24,color:"#FFFFFF",textAlign:"center",lineHeight:32,fontWeight:"400"},highlight:{color:"#FFD9D0"},newTopicButton:{backgroundColor:"rgba(255, 255, 255, 0.05)",borderRadius:12,padding:20,marginBottom:40,alignItems:"center"},newTopicText:{fontFamily:"SF Pro Display",fontSize:16,color:"#FFD9D0",fontWeight:"400"},historySection:{flex:1},historyHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"center",marginBottom:16,paddingHorizontal:16},toggleContainer:{flexDirection:"row",backgroundColor:"#1a1a1a",borderRadius:25,padding:4},toggleButton:{paddingVertical:8,paddingHorizontal:16,borderRadius:20},activeToggle:{backgroundColor:"#333"},toggleText:{color:"#666",fontSize:14,fontWeight:"500"},activeToggleText:{color:"#fff"},searchContainer:{backgroundColor:"#1a1a1a",borderRadius:25,padding:8,overflow:"hidden"},searchInput:{backgroundColor:"transparent",paddingHorizontal:10,color:"#fff",height:40},cardContainer:{marginHorizontal:16,marginVertical:8},cardWrapper:{flexDirection:"row",alignItems:"center"},historyCard:{backgroundColor:"rgba(255, 255, 255, 0.08)",borderRadius:16,elevation:4,overflow:"hidden",flex:1},activeCard:{backgroundColor:"rgba(255, 255, 255, 0.12)",borderColor:"#FFD9D0",borderWidth:1},actionButtons:{overflow:"hidden",flexDirection:"row",alignItems:"center",marginLeft:8},actionButton:{margin:0,backgroundColor:"rgba(255, 255, 255, 0.08)",borderRadius:12},historyCardHeader:{flexDirection:"row",justifyContent:"space-between",alignItems:"flex-start",padding:16,paddingBottom:8},questionContainer:{flex:1,marginRight:8},historyCardTitle:{fontSize:16,color:"#FFFFFF",fontWeight:"500",marginBottom:4,lineHeight:22},historyCardTime:{fontSize:12,color:"rgba(255, 255, 255, 0.5)",marginBottom:4},verseContainer:{padding:16,paddingTop:8,backgroundColor:"rgba(255, 255, 255, 0.03)"},verseText:{fontSize:14,color:"rgba(255, 255, 255, 0.9)",lineHeight:20,marginBottom:4,fontStyle:"italic"},referenceText:{fontSize:12,color:"#FFD9D0",fontWeight:"500"},historyCards:{marginTop:20},loadingText:{color:"#666666",textAlign:"center",marginTop:20,fontSize:16},emptyText:{color:"rgba(255, 255, 255, 0.5)",textAlign:"center",marginTop:20,fontSize:14},limitText:{color:"rgba(255, 255, 255, 0.5)",textAlign:"center",marginTop:16,fontSize:12,fontStyle:"italic"},logoutButton:{marginTop:20,borderColor:"#FFD9D0"},snackbar:{position:"absolute",bottom:0,margin:16,borderRadius:8},successSnackbar:{backgroundColor:"#4CAF50"},errorSnackbar:{backgroundColor:"#F44336"}}),X="https://his-word-bible-app-production.up.railway.app",Y=["I'm praying for healing for my mother who is battling cancer. Can you share a comforting verse and some guidance?","I'm trying to decide whether to accept a new job offer or stay in my current position.","I want to understand more about forgiveness and how to practice it","I want to memorize Psalm 50:21-31. Can you help me with explanations and reflections on this verse?"];function Z(){var e=(0,m.useNavigation)(),t=(0,o.useState)(""),r=(0,f.default)(t,2),n=r[0],a=r[1],i=(0,o.useState)(!1),l=(0,f.default)(i,2),s=l[0],c=l[1],h=(0,o.useState)(null),y=(0,f.default)(h,2),x=y[0],F=y[1],C=function(){var t=(0,u.default)((function*(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n;if(t.trim())try{c(!0),F(null);var r=(yield d.auth.getUser()).data.user;if(!r)return void e.navigate("Login");var o=`${X}/generate`;console.log("Making API request to:",o);var a=yield fetch(o,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json",Origin:window.location.origin},mode:"cors",credentials:"include",body:JSON.stringify({prompt:t.trim(),userId:r.id})});if(!a.ok){var i=yield a.text();throw console.error("API Error Response:",a.status,i),new Error(i||"Failed to get response")}var l=yield a.json();console.log("API Response:",l);var s=(yield d.from("chats").insert({user_id:r.id,question:t.trim(),response:l,created_at:(new Date).toISOString(),is_archived:!1})).error;s&&console.error("Error saving chat:",s),e.navigate("Response",{question:t.trim(),response:l})}catch(u){console.error("Error details:",u),F(u.message||"Failed to get response. Please try again.")}finally{c(!1)}}));return function(){return t.apply(this,arguments)}}();return(0,v.jsxs)(E.SafeAreaView,{style:K.container,children:[(0,v.jsxs)(g.default,{style:K.header,children:[(0,v.jsx)(A.default,{icon:"arrow-left",iconColor:"#FFD9D0",size:24,onPress:function(){return e.goBack()}}),(0,v.jsx)(P.default,{style:K.headerText,children:"Ask a Question"})]}),(0,v.jsxs)(O.default,{style:K.content,contentContainerStyle:K.contentContainer,children:[(0,v.jsx)(P.default,{style:K.label,children:"Your Question"}),(0,v.jsx)(b.default,{value:n,onChangeText:a,placeholder:"Type your question here...",multiline:!0,numberOfLines:4,style:K.input,mode:"outlined"}),x?(0,v.jsx)(P.default,{style:K.errorText,children:x}):null,(0,v.jsx)(j.default,{mode:"contained",onPress:function(){return C()},style:K.submitButton,loading:s,disabled:s||!n.trim(),children:s?"Getting Response...":"Get Response"}),(0,v.jsxs)(g.default,{style:K.examplesSection,children:[(0,v.jsx)(P.default,{style:K.examplesTitle,children:"Example Questions"}),Y.map((function(e,t){return(0,v.jsx)(p.default,{style:K.exampleItem,onPress:function(){return a(t=e),void C(t);var t},children:(0,v.jsx)(P.default,{style:K.exampleText,children:e})},t)}))]})]})]})}var K=y.default.create({container:{flex:1,backgroundColor:"#000000"},header:{flexDirection:"row",alignItems:"center",padding:16},headerText:{fontSize:20,color:"#FFFFFF",marginLeft:8,fontWeight:"bold"},content:{flex:1},contentContainer:{padding:16},label:{fontSize:16,color:"#FFFFFF",marginBottom:8},input:{backgroundColor:"#1A1A1A",marginBottom:16},errorText:{color:"#FF6B6B",marginBottom:16,textAlign:"center"},submitButton:{marginBottom:24,backgroundColor:"#FFD9D0"},examplesSection:{marginTop:16},examplesTitle:{fontSize:18,color:"#FFFFFF",marginBottom:16,fontWeight:"bold"},exampleItem:{backgroundColor:"#1A1A1A",padding:16,borderRadius:8,marginBottom:12},exampleText:{color:"#FFFFFF",fontSize:14}});function $(){var e=(0,m.useNavigation)(),t=(0,m.useRoute)().params,r=(0,o.useState)(!1),n=(0,f.default)(r,2),a=n[0],i=n[1],l=(0,o.useState)(!1),s=(0,f.default)(l,2),c=s[0],d=s[1],h=(0,o.useState)(""),p=(0,f.default)(h,2),y=p[0],x=p[1],b=(0,o.useState)("success"),F=(0,f.default)(b,2),C=F[0],w=F[1],S=function(){var r=(0,u.default)((function*(){try{i(!0),yield G.createChat(t.question,{verse:t.response.verse,reference:t.response.reference,relevance:t.response.relevance,explanation:t.response.explanation}),w("success"),x("Response archived successfully"),d(!0),setTimeout((function(){e.goBack()}),1500)}catch(r){console.error("Error archiving response:",r),w("error"),x(r.message),d(!0)}finally{i(!1)}}));return function(){return r.apply(this,arguments)}}();return t?(0,v.jsxs)(E.SafeAreaView,{style:ee.container,children:[(0,v.jsxs)(g.default,{style:ee.header,children:[(0,v.jsx)(A.default,{icon:"arrow-left",iconColor:"#FFD9D0",size:24,onPress:function(){return e.goBack()}}),(0,v.jsx)(P.default,{style:ee.headerText,children:"Bible Verse Response"})]}),(0,v.jsxs)(O.default,{style:ee.content,contentContainerStyle:ee.contentContainer,children:[(0,v.jsxs)(g.default,{style:ee.section,children:[(0,v.jsx)(P.default,{style:ee.label,children:"Your Question"}),(0,v.jsx)(P.default,{style:ee.text,children:t.question})]}),(0,v.jsxs)(g.default,{style:ee.section,children:[(0,v.jsx)(P.default,{style:ee.label,children:"Bible Verse"}),(0,v.jsx)(P.default,{style:ee.text,children:t.response.verse}),(0,v.jsx)(P.default,{style:ee.text,children:t.response.reference})]}),(0,v.jsxs)(g.default,{style:ee.section,children:[(0,v.jsx)(P.default,{style:ee.label,children:"Relevance"}),(0,v.jsx)(P.default,{style:ee.text,children:t.response.relevance})]}),(0,v.jsxs)(g.default,{style:ee.section,children:[(0,v.jsx)(P.default,{style:ee.label,children:"Application"}),(0,v.jsx)(P.default,{style:ee.text,children:t.response.explanation})]})]}),(0,v.jsxs)(g.default,{style:ee.bottomButtons,children:[(0,v.jsx)(j.default,{mode:"outlined",onPress:function(){return e.navigate("Home")},style:ee.button,icon:"home",textColor:"#FFD9D0",children:"Home"}),(0,v.jsx)(j.default,{mode:"outlined",onPress:S,style:ee.button,icon:"archive",loading:a,disabled:a,textColor:"#FFD9D0",children:"Archive"})]}),(0,v.jsx)(R.default,{visible:c,onDismiss:function(){return d(!1)},duration:2e3,style:[ee.snackbar,"success"===C?ee.successSnackbar:ee.errorSnackbar],children:y})]}):(console.error("No params provided to Response page"),(0,v.jsxs)(E.SafeAreaView,{style:ee.container,children:[(0,v.jsxs)(g.default,{style:ee.header,children:[(0,v.jsx)(A.default,{icon:"arrow-left",size:24,onPress:function(){return e.goBack()},iconColor:"#FFD9D0"}),(0,v.jsx)(P.default,{style:ee.headerText,children:"Error"})]}),(0,v.jsx)(P.default,{style:ee.errorText,children:"No response data available"})]}))}var ee=y.default.create({container:{flex:1,backgroundColor:"#000000"},header:{flexDirection:"row",alignItems:"center",padding:16},headerText:{fontSize:20,color:"#FFFFFF",marginLeft:8,fontWeight:"bold"},content:{flex:1},contentContainer:{padding:16},section:{marginBottom:24},label:{fontSize:16,color:"#FFD9D0",marginBottom:8,fontWeight:"bold"},text:{fontSize:16,color:"#FFFFFF",lineHeight:24},bottomButtons:{flexDirection:"row",justifyContent:"space-between",gap:10,marginTop:20,paddingTop:20,borderTopWidth:1,borderTopColor:"rgba(255, 255, 255, 0.1)"},button:{flex:1,borderColor:"#FFD9D0",borderRadius:25},errorText:{color:"#FF6B6B",fontSize:16,textAlign:"center",marginTop:20},snackbar:{position:"absolute",bottom:0,margin:16,borderRadius:8},successSnackbar:{backgroundColor:"#4CAF50"},errorSnackbar:{backgroundColor:"#F44336"}}),te=r(5991);function re(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function ne(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?re(Object(r),!0).forEach((function(t){(0,n.default)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):re(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var oe=(0,i.default)(),ae=ne(ne({},s.MD3DarkTheme),{},{colors:ne(ne({},s.MD3DarkTheme.colors),{},{primary:"#FFD9D0",background:"#000000",text:"#FFFFFF",placeholder:"#666666",accent:"#FFD9D0"})});function ie(){return(0,v.jsx)(c.SessionContextProvider,{supabaseClient:d,children:(0,v.jsx)(a.default,{children:(0,v.jsx)(l.default,{theme:ae,children:(0,v.jsxs)(oe.Navigator,{initialRouteName:"Login",screenOptions:{contentStyle:{backgroundColor:"#000000"}},children:[(0,v.jsx)(oe.Screen,{name:"Login",component:F,options:{headerShown:!1}}),(0,v.jsx)(oe.Screen,{name:"ForgotPassword",component:T,options:{headerShown:!1}}),(0,v.jsx)(oe.Screen,{name:"SignUp",component:B,options:{headerShown:!1}}),(0,v.jsx)(oe.Screen,{name:"Home",component:J,options:{headerShown:!1}}),(0,v.jsx)(oe.Screen,{name:"Question",component:Z,options:{headerShown:!1}}),(0,v.jsx)(oe.Screen,{name:"Response",component:$,options:{headerShown:!1}})]})})})})}"web"===te.default.OS&&(window._frameTimestamp=null)}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n].call(a.exports,a,a.exports,r),a.exports}r.m=e,(()=>{var e=[];r.O=(t,n,o,a)=>{if(!n){var i=1/0;for(d=0;d<e.length;d++){for(var[n,o,a]=e[d],l=!0,s=0;s<n.length;s++)(!1&a||i>=a)&&Object.keys(r.O).every((e=>r.O[e](n[s])))?n.splice(s--,1):(l=!1,a<i&&(i=a));if(l){e.splice(d--,1);var c=o();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[n,o,a]}})(),r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},(()=>{var e,t=Object.getPrototypeOf?e=>Object.getPrototypeOf(e):e=>e.__proto__;r.t=function(n,o){if(1&o&&(n=this(n)),8&o)return n;if("object"===typeof n&&n){if(4&o&&n.__esModule)return n;if(16&o&&"function"===typeof n.then)return n}var a=Object.create(null);r.r(a);var i={};e=e||[null,t({}),t([]),t(t)];for(var l=2&o&&n;"object"==typeof l&&!~e.indexOf(l);l=t(l))Object.getOwnPropertyNames(l).forEach((e=>i[e]=()=>n[e]));return i.default=()=>n,r.d(a,i),a}})(),r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.f={},r.e=e=>Promise.all(Object.keys(r.f).reduce(((t,n)=>(r.f[n](e,t),t)),[])),r.u=e=>"static/js/"+e+".783bc47a.chunk.js",r.miniCssF=e=>{},r.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}(),r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e={},t="web:";r.l=(n,o,a,i)=>{if(e[n])e[n].push(o);else{var l,s;if(void 0!==a)for(var c=document.getElementsByTagName("script"),d=0;d<c.length;d++){var u=c[d];if(u.getAttribute("src")==n||u.getAttribute("data-webpack")==t+a){l=u;break}}l||(s=!0,(l=document.createElement("script")).charset="utf-8",l.timeout=120,r.nc&&l.setAttribute("nonce",r.nc),l.setAttribute("data-webpack",t+a),l.src=n),e[n]=[o];var f=(t,r)=>{l.onerror=l.onload=null,clearTimeout(g);var o=e[n];if(delete e[n],l.parentNode&&l.parentNode.removeChild(l),o&&o.forEach((e=>e(r))),t)return t(r)},g=setTimeout(f.bind(null,void 0,{type:"timeout",target:l}),12e4);l.onerror=f.bind(null,l.onerror),l.onload=f.bind(null,l.onload),s&&document.head.appendChild(l)}}})(),r.r=e=>{"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.p="/",(()=>{var e={792:0};r.f.j=(t,n)=>{var o=r.o(e,t)?e[t]:void 0;if(0!==o)if(o)n.push(o[2]);else{var a=new Promise(((r,n)=>o=e[t]=[r,n]));n.push(o[2]=a);var i=r.p+r.u(t),l=new Error;r.l(i,(n=>{if(r.o(e,t)&&(0!==(o=e[t])&&(e[t]=void 0),o)){var a=n&&("load"===n.type?"missing":n.type),i=n&&n.target&&n.target.src;l.message="Loading chunk "+t+" failed.\n("+a+": "+i+")",l.name="ChunkLoadError",l.type=a,l.request=i,o[1](l)}}),"chunk-"+t,t)}},r.O.j=t=>0===e[t];var t=(t,n)=>{var o,a,[i,l,s]=n,c=0;if(i.some((t=>0!==e[t]))){for(o in l)r.o(l,o)&&(r.m[o]=l[o]);if(s)var d=s(r)}for(t&&t(n);c<i.length;c++)a=i[c],r.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return r.O(d)},n=self.webpackChunkweb=self.webpackChunkweb||[];n.forEach(t.bind(null,0)),n.push=t.bind(null,n.push.bind(n))})();var n=r.O(void 0,[361],(()=>r(5036)));n=r.O(n)})();
//# sourceMappingURL=main.b5ee4d6b.js.map