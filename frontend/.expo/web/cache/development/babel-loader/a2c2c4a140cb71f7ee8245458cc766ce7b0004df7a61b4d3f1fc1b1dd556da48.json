{"ast":null,"code":"'use strict';\n\nimport { useRef } from 'react';\nimport { useSharedValue } from \"./useSharedValue.js\";\nimport { getShadowNodeWrapperFromRef } from \"../fabricUtils\";\nimport { makeShareableCloneRecursive } from \"../shareables.js\";\nimport { shareableMappingCache } from \"../shareableMappingCache.js\";\nimport Platform from \"react-native-web/dist/exports/Platform\";\nimport { findNodeHandle } from \"../platformFunctions/findNodeHandle\";\nimport { isFabric, isWeb } from \"../PlatformChecker.js\";\nvar IS_WEB = isWeb();\nfunction getComponentOrScrollable(component) {\n  if (isFabric() && component.getNativeScrollRef) {\n    return component.getNativeScrollRef();\n  } else if (!isFabric() && component.getScrollableNode) {\n    return component.getScrollableNode();\n  }\n  return component;\n}\nvar _worklet_3043456830905_init_data = {\n  code: \"function anonymous() {\\n  const {\\n    tag,\\n    viewName\\n  } = this._closure;\\n  const f = function () {\\n    return tag.value;\\n  };\\n  f.viewName = viewName;\\n  return f;\\n}\",\n  location: \"d:\\\\CODING\\\\random\\\\12-13\\\\node_modules\\\\react-native-reanimated\\\\lib\\\\module\\\\hook\\\\useAnimatedRef.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"anonymous\\\",\\\"tag\\\",\\\"viewName\\\",\\\"_closure\\\",\\\"f\\\",\\\"value\\\"],\\\"sources\\\":[\\\"d:/CODING/random/12-13/node_modules/react-native-reanimated/lib/module/hook/useAnimatedRef.js\\\"],\\\"mappings\\\":\\\"AAqDc,SAAAA,SAAMA,CAAA;EAAA;IAAAC,GAAA;IAAAC;EAAA,SAAAC,QAAA;EAGZ,MAAMC,CAAC,GAAG,SAAAA,CAAA;IAAA,OAAMH,GAAG,CAACI,KAAK;EAAA;EACzBD,CAAC,CAACF,QAAQ,GAAGA,QAAQ;EACrB,OAAOE,CAAC;AACV\\\",\\\"ignoreList\\\":[]}\"\n};\nexport function useAnimatedRef() {\n  var tag = useSharedValue(-1);\n  var viewName = useSharedValue(null);\n  var ref = useRef();\n  if (!ref.current) {\n    var _fun = function fun(component) {\n      if (component) {\n        var getTagValueFunction = isFabric() ? getShadowNodeWrapperFromRef : findNodeHandle;\n        var getTagOrShadowNodeWrapper = function getTagOrShadowNodeWrapper() {\n          return IS_WEB ? getComponentOrScrollable(component) : getTagValueFunction(getComponentOrScrollable(component));\n        };\n        tag.value = getTagOrShadowNodeWrapper();\n        _fun.getTag = isFabric() ? function () {\n          return findNodeHandle(getComponentOrScrollable(component));\n        } : getTagOrShadowNodeWrapper;\n        _fun.current = component;\n        if (Platform.OS === 'ios' && !isFabric()) {\n          var _component$viewConfig;\n          viewName.value = (component == null ? void 0 : (_component$viewConfig = component.viewConfig) == null ? void 0 : _component$viewConfig.uiViewClassName) || 'RCTView';\n        }\n      }\n      return tag.value;\n    };\n    _fun.current = null;\n    var animatedRefShareableHandle = makeShareableCloneRecursive({\n      __init: function () {\n        var _e = [new global.Error(), -3, -27];\n        var _f = function _f() {\n          var f = function f() {\n            return tag.value;\n          };\n          f.viewName = viewName;\n          return f;\n        };\n        _f._closure = {\n          tag: tag,\n          viewName: viewName\n        };\n        _f.__initData = _worklet_3043456830905_init_data;\n        _f.__workletHash = 3043456830905;\n        _f.__stackDetails = _e;\n        _f.__version = \"3.3.0\";\n        return _f;\n      }()\n    });\n    shareableMappingCache.set(_fun, animatedRefShareableHandle);\n    ref.current = _fun;\n  }\n  return ref.current;\n}","map":{"version":3,"names":["useRef","useSharedValue","getShadowNodeWrapperFromRef","makeShareableCloneRecursive","shareableMappingCache","Platform","findNodeHandle","isFabric","isWeb","IS_WEB","getComponentOrScrollable","component","getNativeScrollRef","getScrollableNode","_worklet_3043456830905_init_data","code","location","sourceMap","useAnimatedRef","tag","viewName","ref","current","fun","getTagValueFunction","getTagOrShadowNodeWrapper","value","getTag","OS","_component$viewConfig","viewConfig","uiViewClassName","animatedRefShareableHandle","__init","_e","global","Error","_f","f","_closure","__initData","__workletHash","__stackDetails","__version","set"],"sources":["d:\\CODING\\random\\12-13\\node_modules\\react-native-reanimated\\src\\hook\\useAnimatedRef.ts"],"sourcesContent":["'use strict';\nimport type { Component } from 'react';\nimport { useRef } from 'react';\nimport { useSharedValue } from './useSharedValue';\nimport type { AnimatedRef, AnimatedRefOnUI } from './commonTypes';\nimport type { ShadowNodeWrapper } from '../commonTypes';\nimport { getShadowNodeWrapperFromRef } from '../fabricUtils';\nimport { makeShareableCloneRecursive } from '../shareables';\nimport { shareableMappingCache } from '../shareableMappingCache';\nimport { Platform } from 'react-native';\nimport { findNodeHandle } from '../platformFunctions/findNodeHandle';\nimport type { ScrollView, FlatList } from 'react-native';\nimport { isFabric, isWeb } from '../PlatformChecker';\n\nconst IS_WEB = isWeb();\n\ninterface MaybeScrollableComponent extends Component {\n  getNativeScrollRef?: FlatList['getNativeScrollRef'];\n  getScrollableNode?:\n    | ScrollView['getScrollableNode']\n    | FlatList['getScrollableNode'];\n  viewConfig?: {\n    uiViewClassName?: string;\n  };\n}\n\nfunction getComponentOrScrollable(component: MaybeScrollableComponent) {\n  if (isFabric() && component.getNativeScrollRef) {\n    return component.getNativeScrollRef();\n  } else if (!isFabric() && component.getScrollableNode) {\n    return component.getScrollableNode();\n  }\n  return component;\n}\n\n/**\n * Lets you get a reference of a view that you can use inside a worklet.\n *\n * @returns An object with a `.current` property which contains an instance of a\n *   component.\n * @see https://docs.swmansion.com/react-native-reanimated/docs/core/useAnimatedRef\n */\nexport function useAnimatedRef<\n  TComponent extends Component,\n>(): AnimatedRef<TComponent> {\n  const tag = useSharedValue<number | ShadowNodeWrapper | null>(-1);\n  const viewName = useSharedValue<string | null>(null);\n\n  const ref = useRef<AnimatedRef<TComponent>>();\n\n  if (!ref.current) {\n    const fun: AnimatedRef<TComponent> = <AnimatedRef<TComponent>>((\n      component\n    ) => {\n      // enters when ref is set by attaching to a component\n      if (component) {\n        const getTagValueFunction = isFabric()\n          ? getShadowNodeWrapperFromRef\n          : findNodeHandle;\n\n        const getTagOrShadowNodeWrapper = () => {\n          return IS_WEB\n            ? getComponentOrScrollable(component)\n            : getTagValueFunction(getComponentOrScrollable(component));\n        };\n\n        tag.value = getTagOrShadowNodeWrapper();\n\n        // On Fabric we have to unwrap the tag from the shadow node wrapper\n        fun.getTag = isFabric()\n          ? () => findNodeHandle(getComponentOrScrollable(component))\n          : getTagOrShadowNodeWrapper;\n\n        fun.current = component;\n        // viewName is required only on iOS with Paper\n        if (Platform.OS === 'ios' && !isFabric()) {\n          viewName.value =\n            (component as MaybeScrollableComponent)?.viewConfig\n              ?.uiViewClassName || 'RCTView';\n        }\n      }\n      return tag.value;\n    });\n\n    fun.current = null;\n\n    const animatedRefShareableHandle = makeShareableCloneRecursive({\n      __init: () => {\n        'worklet';\n        const f: AnimatedRefOnUI = () => tag.value;\n        f.viewName = viewName;\n        return f;\n      },\n    });\n    shareableMappingCache.set(fun, animatedRefShareableHandle);\n    ref.current = fun;\n  }\n\n  return ref.current;\n}\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}