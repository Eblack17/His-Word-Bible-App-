{"ast":null,"code":"'use strict';\n\nimport React, { useEffect, useRef } from 'react';\nimport TextInput from \"react-native-web/dist/exports/TextInput\";\nimport StyleSheet from \"react-native-web/dist/exports/StyleSheet\";\nimport View from \"react-native-web/dist/exports/View\";\nimport { useSharedValue, useAnimatedProps, useFrameCallback } from \"../hook/index.js\";\nimport { createAnimatedComponent } from \"../createAnimatedComponent/index.js\";\nimport { addWhitelistedNativeProps } from \"../ConfigHelper.js\";\nvar _worklet_15236127263074_init_data = {\n  code: \"function createCircularDoublesBuffer(size) {\\n  return {\\n    next: 0,\\n    buffer: new Float32Array(size),\\n    size: size,\\n    count: 0,\\n    push: function (value) {\\n      const oldValue = this.buffer[this.next];\\n      const oldCount = this.count;\\n      this.buffer[this.next] = value;\\n      this.next = (this.next + 1) % this.size;\\n      this.count = Math.min(this.size, this.count + 1);\\n      return oldCount === this.size ? oldValue : null;\\n    },\\n    front: function () {\\n      const notEmpty = this.count > 0;\\n      if (notEmpty) {\\n        const current = this.next - 1;\\n        const index = current < 0 ? this.size - 1 : current;\\n        return this.buffer[index];\\n      }\\n      return null;\\n    },\\n    back: function () {\\n      const notEmpty = this.count > 0;\\n      return notEmpty ? this.buffer[this.next] : null;\\n    }\\n  };\\n}\",\n  location: \"d:\\\\CODING\\\\random\\\\12-13\\\\node_modules\\\\react-native-reanimated\\\\lib\\\\module\\\\component\\\\PerformanceMonitor.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"createCircularDoublesBuffer\\\",\\\"size\\\",\\\"next\\\",\\\"buffer\\\",\\\"Float32Array\\\",\\\"count\\\",\\\"push\\\",\\\"value\\\",\\\"oldValue\\\",\\\"oldCount\\\",\\\"Math\\\",\\\"min\\\",\\\"front\\\",\\\"notEmpty\\\",\\\"current\\\",\\\"index\\\",\\\"back\\\"],\\\"sources\\\":[\\\"d:/CODING/random/12-13/node_modules/react-native-reanimated/lib/module/component/PerformanceMonitor.js\\\"],\\\"mappings\\\":\\\"AAOA,SAAAA,2BAASA,CAA4BC,IAAA,EAAI;EAGvC,OAAO;IACLC,IAAI,EAAE,CAAC;IACPC,MAAM,EAAE,IAAIC,YAAY,CAACH,IAAI,CAAC;IAC9BA,IAAI,EAAJA,IAAI;IACJI,KAAK,EAAE,CAAC;IACRC,IAAI,WAAAA,CAACC,KAAK,EAAE;MACV,MAAMC,QAAQ,GAAG,IAAI,CAACL,MAAM,CAAC,IAAI,CAACD,IAAI,CAAC;MACvC,MAAMO,QAAQ,GAAG,IAAI,CAACJ,KAAK;MAC3B,IAAI,CAACF,MAAM,CAAC,IAAI,CAACD,IAAI,CAAC,GAAGK,KAAK;MAC9B,IAAI,CAACL,IAAI,GAAG,CAAC,IAAI,CAACA,IAAI,GAAG,CAAC,IAAI,IAAI,CAACD,IAAI;MACvC,IAAI,CAACI,KAAK,GAAGK,IAAI,CAACC,GAAG,CAAC,IAAI,CAACV,IAAI,EAAE,IAAI,CAACI,KAAK,GAAG,CAAC,CAAC;MAChD,OAAOI,QAAQ,KAAK,IAAI,CAACR,IAAI,GAAGO,QAAQ,GAAG,IAAI;IACjD,CAAC;IACDI,KAAK,WAAAA,CAAA,EAAG;MACN,MAAMC,QAAQ,GAAG,IAAI,CAACR,KAAK,GAAG,CAAC;MAC/B,IAAIQ,QAAQ,EAAE;QACZ,MAAMC,OAAO,GAAG,IAAI,CAACZ,IAAI,GAAG,CAAC;QAC7B,MAAMa,KAAK,GAAGD,OAAO,GAAG,CAAC,GAAG,IAAI,CAACb,IAAI,GAAG,CAAC,GAAGa,OAAO;QACnD,OAAO,IAAI,CAACX,MAAM,CAACY,KAAK,CAAC;MAC3B;MACA,OAAO,IAAI;IACb,CAAC;IACDC,IAAI,WAAAA,CAAA,EAAG;MACL,MAAMH,QAAQ,GAAG,IAAI,CAACR,KAAK,GAAG,CAAC;MAC/B,OAAOQ,QAAQ,GAAG,IAAI,CAACV,MAAM,CAAC,IAAI,CAACD,IAAI,CAAC,GAAG,IAAI;IACjD;EACF,CAAC;AACH\\\",\\\"ignoreList\\\":[]}\"\n};\nvar createCircularDoublesBuffer = function () {\n  var _e = [new global.Error(), 1, -27];\n  var _f = function _f(size) {\n    return {\n      next: 0,\n      buffer: new Float32Array(size),\n      size: size,\n      count: 0,\n      push: function push(value) {\n        var oldValue = this.buffer[this.next];\n        var oldCount = this.count;\n        this.buffer[this.next] = value;\n        this.next = (this.next + 1) % this.size;\n        this.count = Math.min(this.size, this.count + 1);\n        return oldCount === this.size ? oldValue : null;\n      },\n      front: function front() {\n        var notEmpty = this.count > 0;\n        if (notEmpty) {\n          var current = this.next - 1;\n          var index = current < 0 ? this.size - 1 : current;\n          return this.buffer[index];\n        }\n        return null;\n      },\n      back: function back() {\n        var notEmpty = this.count > 0;\n        return notEmpty ? this.buffer[this.next] : null;\n      }\n    };\n  };\n  _f._closure = {};\n  _f.__initData = _worklet_15236127263074_init_data;\n  _f.__workletHash = 15236127263074;\n  _f.__stackDetails = _e;\n  _f.__version = \"3.3.0\";\n  return _f;\n}();\nvar DEFAULT_BUFFER_SIZE = 20;\naddWhitelistedNativeProps({\n  text: true\n});\nvar AnimatedTextInput = createAnimatedComponent(TextInput);\nfunction loopAnimationFrame(fn) {\n  var lastTime = 0;\n  function loop() {\n    requestAnimationFrame(function (time) {\n      if (lastTime > 0) {\n        fn(lastTime, time);\n      }\n      lastTime = time;\n      requestAnimationFrame(loop);\n    });\n  }\n  loop();\n}\nvar _worklet_15552433594094_init_data = {\n  code: \"function getFps(renderTimeInMs) {\\n  return 1000 / renderTimeInMs;\\n}\",\n  location: \"d:\\\\CODING\\\\random\\\\12-13\\\\node_modules\\\\react-native-reanimated\\\\lib\\\\module\\\\component\\\\PerformanceMonitor.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"getFps\\\",\\\"renderTimeInMs\\\"],\\\"sources\\\":[\\\"d:/CODING/random/12-13/node_modules/react-native-reanimated/lib/module/component/PerformanceMonitor.js\\\"],\\\"mappings\\\":\\\"AAwDA,SAAAA,MAASA,CAAOC,cAAA,EAAc;EAG5B,OAAO,IAAI,GAAGA,cAAc;AAC9B\\\",\\\"ignoreList\\\":[]}\"\n};\nvar getFps = function () {\n  var _e = [new global.Error(), 1, -27];\n  var _f = function _f(renderTimeInMs) {\n    return 1000 / renderTimeInMs;\n  };\n  _f._closure = {};\n  _f.__initData = _worklet_15552433594094_init_data;\n  _f.__workletHash = 15552433594094;\n  _f.__stackDetails = _e;\n  _f.__version = \"3.3.0\";\n  return _f;\n}();\nvar _worklet_2087799869885_init_data = {\n  code: \"function completeBufferRoutine(buffer, timestamp) {\\n  const {\\n    getFps\\n  } = this._closure;\\n  var _buffer$push;\\n  timestamp = Math.round(timestamp);\\n  const droppedTimestamp = (_buffer$push = buffer.push(timestamp)) !== null && _buffer$push !== void 0 ? _buffer$push : timestamp;\\n  const measuredRangeDuration = timestamp - droppedTimestamp;\\n  return getFps(measuredRangeDuration / buffer.count);\\n}\",\n  location: \"d:\\\\CODING\\\\random\\\\12-13\\\\node_modules\\\\react-native-reanimated\\\\lib\\\\module\\\\component\\\\PerformanceMonitor.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"completeBufferRoutine\\\",\\\"buffer\\\",\\\"timestamp\\\",\\\"getFps\\\",\\\"_closure\\\",\\\"_buffer$push\\\",\\\"Math\\\",\\\"round\\\",\\\"droppedTimestamp\\\",\\\"push\\\",\\\"measuredRangeDuration\\\",\\\"count\\\"],\\\"sources\\\":[\\\"d:/CODING/random/12-13/node_modules/react-native-reanimated/lib/module/component/PerformanceMonitor.js\\\"],\\\"mappings\\\":\\\"AA6DA,SAAAA,qBAASA,CAAsBC,MAAA,EAAMC,SAAE,EAAS;EAAA;IAAAC;EAAA,SAAAC,QAAA;EAAE,IAAAC,YAAA;EAGhDH,SAAS,GAAGI,IAAI,CAACC,KAAK,CAACL,SAAS,CAAC;EACjC,MAAMM,gBAAgB,IAAAH,YAAA,GAAGJ,MAAM,CAACQ,IAAI,CAACP,SAAS,CAAC,cAAAG,YAAA,cAAAA,YAAA,GAAIH,SAAS;EAC5D,MAAMQ,qBAAqB,GAAGR,SAAS,GAAGM,gBAAgB;EAC1D,OAAOL,MAAM,CAACO,qBAAqB,GAAGT,MAAM,CAACU,KAAK,CAAC;AACrD\\\",\\\"ignoreList\\\":[]}\"\n};\nvar completeBufferRoutine = function () {\n  var _e = [new global.Error(), -2, -27];\n  var _f = function _f(buffer, timestamp) {\n    var _buffer$push;\n    timestamp = Math.round(timestamp);\n    var droppedTimestamp = (_buffer$push = buffer.push(timestamp)) != null ? _buffer$push : timestamp;\n    var measuredRangeDuration = timestamp - droppedTimestamp;\n    return getFps(measuredRangeDuration / buffer.count);\n  };\n  _f._closure = {\n    getFps: getFps\n  };\n  _f.__initData = _worklet_2087799869885_init_data;\n  _f.__workletHash = 2087799869885;\n  _f.__stackDetails = _e;\n  _f.__version = \"3.3.0\";\n  return _f;\n}();\nvar _worklet_8354171369141_init_data = {\n  code: \"function anonymous() {\\n  const {\\n    jsFps\\n  } = this._closure;\\n  var _jsFps$value;\\n  const text = 'JS: ' + ((_jsFps$value = jsFps.value) !== null && _jsFps$value !== void 0 ? _jsFps$value : 'N/A') + ' ';\\n  return {\\n    text: text,\\n    defaultValue: text\\n  };\\n}\",\n  location: \"d:\\\\CODING\\\\random\\\\12-13\\\\node_modules\\\\react-native-reanimated\\\\lib\\\\module\\\\component\\\\PerformanceMonitor.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"anonymous\\\",\\\"jsFps\\\",\\\"_closure\\\",\\\"_jsFps$value\\\",\\\"text\\\",\\\"value\\\",\\\"defaultValue\\\"],\\\"sources\\\":[\\\"d:/CODING/random/12-13/node_modules/react-native-reanimated/lib/module/component/PerformanceMonitor.js\\\"],\\\"mappings\\\":\\\"AAqFyC,SAAAA,SAAMA,CAAA;EAAA;IAAAC;EAAA,SAAAC,QAAA;EAAA,IAAAC,YAAA;EAC3C,MAAMC,IAAI,GAAG,MAAM,KAAAD,YAAA,GAAIF,KAAK,CAACI,KAAK,cAAAF,YAAA,cAAAA,YAAA,GAAI,KAAK,CAAC,GAAG,GAAG;EAClD,OAAO;IACLC,IAAI,EAAJA,IAAI;IACJE,YAAY,EAAEF;EAChB,CAAC;AACH\\\",\\\"ignoreList\\\":[]}\"\n};\nfunction JsPerformance(_ref) {\n  var smoothingFrames = _ref.smoothingFrames;\n  var jsFps = useSharedValue(null);\n  var totalRenderTime = useSharedValue(0);\n  var circularBuffer = useRef(createCircularDoublesBuffer(smoothingFrames));\n  useEffect(function () {\n    loopAnimationFrame(function (_, timestamp) {\n      timestamp = Math.round(timestamp);\n      var currentFps = completeBufferRoutine(circularBuffer.current, timestamp);\n      jsFps.value = (currentFps * 2).toFixed(0);\n    });\n  }, [jsFps, totalRenderTime]);\n  var animatedProps = useAnimatedProps(function () {\n    var _e = [new global.Error(), -2, -27];\n    var _f = function _f() {\n      var _jsFps$value;\n      var text = 'JS: ' + ((_jsFps$value = jsFps.value) != null ? _jsFps$value : 'N/A') + ' ';\n      return {\n        text: text,\n        defaultValue: text\n      };\n    };\n    _f._closure = {\n      jsFps: jsFps\n    };\n    _f.__initData = _worklet_8354171369141_init_data;\n    _f.__workletHash = 8354171369141;\n    _f.__stackDetails = _e;\n    _f.__version = \"3.3.0\";\n    return _f;\n  }());\n  return React.createElement(View, {\n    style: styles.container\n  }, React.createElement(AnimatedTextInput, {\n    style: styles.text,\n    animatedProps: animatedProps,\n    editable: false\n  }));\n}\nvar _worklet_1097932637160_init_data = {\n  code: \"function anonymous({\\n  timestamp: timestamp\\n}) {\\n  const {\\n    circularBuffer,\\n    createCircularDoublesBuffer,\\n    smoothingFrames,\\n    completeBufferRoutine,\\n    uiFps\\n  } = this._closure;\\n  if (circularBuffer.value === null) {\\n    circularBuffer.value = createCircularDoublesBuffer(smoothingFrames);\\n  }\\n  timestamp = Math.round(timestamp);\\n  const currentFps = completeBufferRoutine(circularBuffer.value, timestamp);\\n  uiFps.value = currentFps.toFixed(0);\\n}\",\n  location: \"d:\\\\CODING\\\\random\\\\12-13\\\\node_modules\\\\react-native-reanimated\\\\lib\\\\module\\\\component\\\\PerformanceMonitor.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"anonymous\\\",\\\"timestamp\\\",\\\"circularBuffer\\\",\\\"createCircularDoublesBuffer\\\",\\\"smoothingFrames\\\",\\\"completeBufferRoutine\\\",\\\"uiFps\\\",\\\"_closure\\\",\\\"value\\\",\\\"Math\\\",\\\"round\\\",\\\"currentFps\\\",\\\"toFixed\\\"],\\\"sources\\\":[\\\"d:/CODING/random/12-13/node_modules/react-native-reanimated/lib/module/component/PerformanceMonitor.js\\\"],\\\"mappings\\\":\\\"AAyGmB,SAACA,UAAA;EAChBC,SAAA,EAAAA;AACF,CAAC,EAAK;EAAA;IAAAC,cAAA;IAAAC,2BAAA;IAAAC,eAAA;IAAAC,qBAAA;IAAAC;EAAA,SAAAC,QAAA;EACJ,IAAIL,cAAc,CAACM,KAAK,KAAK,IAAI,EAAE;IACjCN,cAAc,CAACM,KAAK,GAAGL,2BAA2B,CAACC,eAAe,CAAC;EACrE;EACAH,SAAS,GAAGQ,IAAI,CAACC,KAAK,CAACT,SAAS,CAAC;EACjC,MAAMU,UAAU,GAAGN,qBAAqB,CAACH,cAAc,CAACM,KAAK,EAAEP,SAAS,CAAC;EACzEK,KAAK,CAACE,KAAK,GAAGG,UAAU,CAACC,OAAO,CAAC,CAAC,CAAC;AACrC\\\",\\\"ignoreList\\\":[]}\"\n};\nvar _worklet_6687979454192_init_data = {\n  code: \"function anonymous() {\\n  const {\\n    uiFps\\n  } = this._closure;\\n  var _uiFps$value;\\n  const text = 'UI: ' + ((_uiFps$value = uiFps.value) !== null && _uiFps$value !== void 0 ? _uiFps$value : 'N/A') + ' ';\\n  return {\\n    text: text,\\n    defaultValue: text\\n  };\\n}\",\n  location: \"d:\\\\CODING\\\\random\\\\12-13\\\\node_modules\\\\react-native-reanimated\\\\lib\\\\module\\\\component\\\\PerformanceMonitor.js\",\n  sourceMap: \"{\\\"version\\\":3,\\\"names\\\":[\\\"anonymous\\\",\\\"uiFps\\\",\\\"_closure\\\",\\\"_uiFps$value\\\",\\\"text\\\",\\\"value\\\",\\\"defaultValue\\\"],\\\"sources\\\":[\\\"d:/CODING/random/12-13/node_modules/react-native-reanimated/lib/module/component/PerformanceMonitor.js\\\"],\\\"mappings\\\":\\\"AAmHyC,SAAAA,SAAMA,CAAA;EAAA;IAAAC;EAAA,SAAAC,QAAA;EAAA,IAAAC,YAAA;EAC3C,MAAMC,IAAI,GAAG,MAAM,KAAAD,YAAA,GAAIF,KAAK,CAACI,KAAK,cAAAF,YAAA,cAAAA,YAAA,GAAI,KAAK,CAAC,GAAG,GAAG;EAClD,OAAO;IACLC,IAAI,EAAJA,IAAI;IACJE,YAAY,EAAEF;EAChB,CAAC;AACH\\\",\\\"ignoreList\\\":[]}\"\n};\nfunction UiPerformance(_ref2) {\n  var smoothingFrames = _ref2.smoothingFrames;\n  var uiFps = useSharedValue(null);\n  var circularBuffer = useSharedValue(null);\n  useFrameCallback(function () {\n    var _e = [new global.Error(), -6, -27];\n    var _f = function _f(_ref3) {\n      var timestamp = _ref3.timestamp;\n      if (circularBuffer.value === null) {\n        circularBuffer.value = createCircularDoublesBuffer(smoothingFrames);\n      }\n      timestamp = Math.round(timestamp);\n      var currentFps = completeBufferRoutine(circularBuffer.value, timestamp);\n      uiFps.value = currentFps.toFixed(0);\n    };\n    _f._closure = {\n      circularBuffer: circularBuffer,\n      createCircularDoublesBuffer: createCircularDoublesBuffer,\n      smoothingFrames: smoothingFrames,\n      completeBufferRoutine: completeBufferRoutine,\n      uiFps: uiFps\n    };\n    _f.__initData = _worklet_1097932637160_init_data;\n    _f.__workletHash = 1097932637160;\n    _f.__stackDetails = _e;\n    _f.__version = \"3.3.0\";\n    return _f;\n  }());\n  var animatedProps = useAnimatedProps(function () {\n    var _e = [new global.Error(), -2, -27];\n    var _f = function _f() {\n      var _uiFps$value;\n      var text = 'UI: ' + ((_uiFps$value = uiFps.value) != null ? _uiFps$value : 'N/A') + ' ';\n      return {\n        text: text,\n        defaultValue: text\n      };\n    };\n    _f._closure = {\n      uiFps: uiFps\n    };\n    _f.__initData = _worklet_6687979454192_init_data;\n    _f.__workletHash = 6687979454192;\n    _f.__stackDetails = _e;\n    _f.__version = \"3.3.0\";\n    return _f;\n  }());\n  return React.createElement(View, {\n    style: styles.container\n  }, React.createElement(AnimatedTextInput, {\n    style: styles.text,\n    animatedProps: animatedProps,\n    editable: false\n  }));\n}\nexport function PerformanceMonitor(_ref4) {\n  var _ref4$smoothingFrames = _ref4.smoothingFrames,\n    smoothingFrames = _ref4$smoothingFrames === void 0 ? DEFAULT_BUFFER_SIZE : _ref4$smoothingFrames;\n  return React.createElement(View, {\n    style: styles.monitor\n  }, React.createElement(JsPerformance, {\n    smoothingFrames: smoothingFrames\n  }), React.createElement(UiPerformance, {\n    smoothingFrames: smoothingFrames\n  }));\n}\nvar styles = StyleSheet.create({\n  monitor: {\n    flexDirection: 'row',\n    position: 'absolute',\n    backgroundColor: '#0006',\n    zIndex: 1000\n  },\n  header: {\n    fontSize: 14,\n    color: '#ffff',\n    paddingHorizontal: 5\n  },\n  text: {\n    fontSize: 13,\n    color: '#ffff',\n    fontFamily: 'monospace',\n    paddingHorizontal: 3\n  },\n  container: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    flexDirection: 'row',\n    flexWrap: 'wrap'\n  }\n});","map":{"version":3,"names":["React","useEffect","useRef","TextInput","StyleSheet","View","useSharedValue","useAnimatedProps","useFrameCallback","createAnimatedComponent","addWhitelistedNativeProps","_worklet_15236127263074_init_data","code","location","sourceMap","createCircularDoublesBuffer","_e","global","Error","_f","size","next","buffer","Float32Array","count","push","value","oldValue","oldCount","Math","min","front","notEmpty","current","index","back","_closure","__initData","__workletHash","__stackDetails","__version","DEFAULT_BUFFER_SIZE","text","AnimatedTextInput","loopAnimationFrame","fn","lastTime","loop","requestAnimationFrame","time","_worklet_15552433594094_init_data","getFps","renderTimeInMs","_worklet_2087799869885_init_data","completeBufferRoutine","timestamp","_buffer$push","round","droppedTimestamp","measuredRangeDuration","_worklet_8354171369141_init_data","JsPerformance","_ref","smoothingFrames","jsFps","totalRenderTime","circularBuffer","_","currentFps","toFixed","animatedProps","_jsFps$value","defaultValue","createElement","style","styles","container","editable","_worklet_1097932637160_init_data","_worklet_6687979454192_init_data","UiPerformance","_ref2","uiFps","_ref3","_uiFps$value","PerformanceMonitor","_ref4","_ref4$smoothingFrames","monitor","create","flexDirection","position","backgroundColor","zIndex","header","fontSize","color","paddingHorizontal","fontFamily","alignItems","justifyContent","flexWrap"],"sources":["d:\\CODING\\random\\12-13\\node_modules\\react-native-reanimated\\src\\component\\PerformanceMonitor.tsx"],"sourcesContent":["'use strict';\n\nimport React, { useEffect, useRef } from 'react';\nimport { TextInput, StyleSheet, View } from 'react-native';\n\nimport type { FrameInfo } from '../frameCallback';\nimport { useSharedValue, useAnimatedProps, useFrameCallback } from '../hook';\nimport { createAnimatedComponent } from '../createAnimatedComponent';\nimport { addWhitelistedNativeProps } from '../ConfigHelper';\n\ntype CircularBuffer = ReturnType<typeof createCircularDoublesBuffer>;\nfunction createCircularDoublesBuffer(size: number) {\n  'worklet';\n\n  return {\n    next: 0 as number,\n    buffer: new Float32Array(size),\n    size,\n    count: 0 as number,\n\n    push(value: number): number | null {\n      const oldValue = this.buffer[this.next];\n      const oldCount = this.count;\n      this.buffer[this.next] = value;\n\n      this.next = (this.next + 1) % this.size;\n      this.count = Math.min(this.size, this.count + 1);\n      return oldCount === this.size ? oldValue : null;\n    },\n\n    front(): number | null {\n      const notEmpty = this.count > 0;\n      if (notEmpty) {\n        const current = this.next - 1;\n        const index = current < 0 ? this.size - 1 : current;\n        return this.buffer[index];\n      }\n      return null;\n    },\n\n    back(): number | null {\n      const notEmpty = this.count > 0;\n      return notEmpty ? this.buffer[this.next] : null;\n    },\n  };\n}\n\nconst DEFAULT_BUFFER_SIZE = 20;\naddWhitelistedNativeProps({ text: true });\nconst AnimatedTextInput = createAnimatedComponent(TextInput);\n\nfunction loopAnimationFrame(fn: (lastTime: number, time: number) => void) {\n  let lastTime = 0;\n\n  function loop() {\n    requestAnimationFrame((time) => {\n      if (lastTime > 0) {\n        fn(lastTime, time);\n      }\n      lastTime = time;\n      requestAnimationFrame(loop);\n    });\n  }\n\n  loop();\n}\n\nfunction getFps(renderTimeInMs: number): number {\n  'worklet';\n  return 1000 / renderTimeInMs;\n}\n\nfunction completeBufferRoutine(\n  buffer: CircularBuffer,\n  timestamp: number\n): number {\n  'worklet';\n  timestamp = Math.round(timestamp);\n\n  const droppedTimestamp = buffer.push(timestamp) ?? timestamp;\n\n  const measuredRangeDuration = timestamp - droppedTimestamp;\n\n  return getFps(measuredRangeDuration / buffer.count);\n}\n\nfunction JsPerformance({ smoothingFrames }: { smoothingFrames: number }) {\n  const jsFps = useSharedValue<string | null>(null);\n  const totalRenderTime = useSharedValue(0);\n  const circularBuffer = useRef<CircularBuffer>(\n    createCircularDoublesBuffer(smoothingFrames)\n  );\n\n  useEffect(() => {\n    loopAnimationFrame((_, timestamp) => {\n      timestamp = Math.round(timestamp);\n\n      const currentFps = completeBufferRoutine(\n        circularBuffer.current,\n        timestamp\n      );\n\n      // JS fps have to be measured every 2nd frame,\n      // thus 2x multiplication has to occur here\n      jsFps.value = (currentFps * 2).toFixed(0);\n    });\n  }, [jsFps, totalRenderTime]);\n\n  const animatedProps = useAnimatedProps(() => {\n    const text = 'JS: ' + (jsFps.value ?? 'N/A') + ' ';\n    return { text, defaultValue: text };\n  });\n\n  return (\n    <View style={styles.container}>\n      <AnimatedTextInput\n        style={styles.text}\n        animatedProps={animatedProps}\n        editable={false}\n      />\n    </View>\n  );\n}\n\nfunction UiPerformance({ smoothingFrames }: { smoothingFrames: number }) {\n  const uiFps = useSharedValue<string | null>(null);\n  const circularBuffer = useSharedValue<CircularBuffer | null>(null);\n\n  useFrameCallback(({ timestamp }: FrameInfo) => {\n    if (circularBuffer.value === null) {\n      circularBuffer.value = createCircularDoublesBuffer(smoothingFrames);\n    }\n\n    timestamp = Math.round(timestamp);\n\n    const currentFps = completeBufferRoutine(circularBuffer.value, timestamp);\n\n    uiFps.value = currentFps.toFixed(0);\n  });\n\n  const animatedProps = useAnimatedProps(() => {\n    const text = 'UI: ' + (uiFps.value ?? 'N/A') + ' ';\n    return { text, defaultValue: text };\n  });\n\n  return (\n    <View style={styles.container}>\n      <AnimatedTextInput\n        style={styles.text}\n        animatedProps={animatedProps}\n        editable={false}\n      />\n    </View>\n  );\n}\n\nexport type PerformanceMonitorProps = {\n  /**\n   * Sets amount of previous frames used for smoothing at highest expectedFps.\n   *\n   * Automatically scales down at lower frame rates.\n   *\n   * Affects jumpiness of the FPS measurements value.\n   */\n  smoothingFrames?: number;\n};\n\n/**\n * A component that lets you measure fps values on JS and UI threads on both the\n * Paper and Fabric architectures.\n *\n * @param smoothingFrames - Determines amount of saved frames which will be used\n *   for fps value smoothing.\n */\nexport function PerformanceMonitor({\n  smoothingFrames = DEFAULT_BUFFER_SIZE,\n}: PerformanceMonitorProps) {\n  return (\n    <View style={styles.monitor}>\n      <JsPerformance smoothingFrames={smoothingFrames} />\n      <UiPerformance smoothingFrames={smoothingFrames} />\n    </View>\n  );\n}\n\nconst styles = StyleSheet.create({\n  monitor: {\n    flexDirection: 'row',\n    position: 'absolute',\n    backgroundColor: '#0006',\n    zIndex: 1000,\n  },\n  header: {\n    fontSize: 14,\n    color: '#ffff',\n    paddingHorizontal: 5,\n  },\n  text: {\n    fontSize: 13,\n    color: '#ffff',\n    fontFamily: 'monospace',\n    paddingHorizontal: 3,\n  },\n  container: {\n    alignItems: 'center',\n    justifyContent: 'center',\n    flexDirection: 'row',\n    flexWrap: 'wrap',\n  },\n});\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}